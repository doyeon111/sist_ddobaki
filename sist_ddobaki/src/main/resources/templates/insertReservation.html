<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>예약페이지</title>
<link rel="stylesheet"
	href="../jquery-ui-1.13.1.custom/jquery-ui.min.css">
<link rel="stylesheet" href="../jquery.jqGrid-4.4.3/css/ui.jqgrid.css">
<style type="text/css">
legend {
	background-color: #000;
	color: #fff;
	padding: 3px 6px;
  text-align: center;
	
}
  
  form {
    text-align:center;

  }
  
 fieldset {
    width: 50%;
    heigth: 50%;
    margin:auto;
    background-color: #f9f9f9;
  } 

  .reservation_all{
    margin: auto;
  }
  
  #checkin, #checkout {
    appearance: none;
  }
</style>

<script type="text/javascript"
	src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script type="text/javascript"
	src="../jquery-ui-1.13.1.custom/jquery-ui.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

<script type="text/javascript">

	$(function() {

		var placePark = $("#reservation_park").val();
		var placeSpa = $("#reservation_spa").val();
		var placeMeal = $("#reservation_meal").val();
		
		console.log(placePark);
		console.log(placeSpa);
		console.log(placeMeal);
		
		
		$("#checkout").change(function(){
			
			var placeNum = $("#placeNum").val();
			var checkindate = $("#checkindate").val();
			var checkoutdate = $("#checkoutdate").val();

			console.log(placeNum);
			console.log(checkindate);
			console.log(checkoutdate);
			
			
			var data = {
					place_num: placeNum,
					reservation_checkin_date: checkindate,
					reservation_checkout_date: checkoutdate
			}


			$.ajax({
				url: "/getAvailable",
				data: data,
				success:function(arr){
					$("#room").empty();
					console.log(arr);
					$.each(arr, function(index, r){
						var option = $("<option></option>").html(r.room_name).attr("value", r.room_num);
						$("#room").append(option);
					});
					
				}
				
			});			
			
		});
		
	
	});
</script>
</head>
<body>
	<h2>예약하기</h2>
	<hr>
	<form action="/saveReservation" method="post">
	<fieldset class="reservation_all">
		<legend>예약하기</legend>
		
		예약번호: <input type="text" id="reservationNum" name="reservation_num" th:value="${reservation_num}"><br>
		유저번호: <input type="number" id="userNum" name="user_num" th:value="${us.user_num}" th:text="${us.user_id}"><br>
		장소번호: <input type="text" id="placeNum" name="place_num" th:value="${ps.place_num}" th:text="${ps.place_name}"><br>
			<div class="check_date_big">
    			체크인
				<span id="checkin"><input type="date" id="checkindate" th:name="reservation_checkin_date"></span> 
				<span><img alt="==>" src="" id="img_1"></span> 
				<span id="checkout">
				<input type="date" id="checkoutdate" th:name="reservation_checkout_date"> 체크아웃</span>
			</div>

			<br>

			<div class="inwon_big">
				인원: <input type="number" id="inwon" th:name="reservation_people_cnt">
			</div>

			<br>

			<div class="dog_weight_big">
				소(1-5kg): <input type="number" id="s_dog" th:name="reservation_s_dog_cnt"><br> 
				중(6-15kg): <input type="number" id="m_dog" th:name="reservation_m_dog_cnt"><br> 
				대(15kg이상): <input type="number" id="l_dog" th:name="reservation_l_dog_cnt"><br>
			</div>

			<br>

			<div class="room_big">
				룸: <select id="room" th:name="room_num">
					
				</select>
			</div>

			<br>

			<div class="park_big" id="reservation_park">
				주차여부: <input type="radio" th:name="reservation_park" value="1" /> 이용 
				<input type="radio" th:name="reservation_park" value="0" /> 미이용
			</div>

			<br>

			<div class="spa_big" id="reservation_spa">
				스파여부: <input type="radio" th:name="reservation_spa" value="1" />
				이용 <input type="radio" th:name="reservation_spa" value="0" /> 미이용
			</div>

			<br>

			<div class="breakfast_big">
				조식인원: <input type="number" id="breakfast" th:name="reservation_meal_cnt">
			</div>

			<br>
			<input type="submit" value="예약하기" id="btn_add_reservation" class="btn btn-dark">
	</fieldset>
	</form>
</body>
</html>